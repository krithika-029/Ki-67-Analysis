{
  "validation_timestamp": "2025-06-21 12:03:18",
  "method": "improved_confidence_validation",
  "summary": {
    "classification_accuracy": 70.0,
    "mean_ki67_error": 61.70360750121006,
    "median_ki67_error": 81.26598852872849,
    "mean_raw_confidence": 74.9169644298579,
    "mean_improved_confidence": 84.49195256994673,
    "total_images": 20,
    "high_confidence_cases": 13,
    "low_confidence_cases": 7,
    "high_confidence_accuracy": 84.61538461538461,
    "low_confidence_accuracy": 42.857142857142854,
    "confidence_accuracy_gap": 41.75824175824176
  },
  "detailed_results": [
    {
      "image_name": "0.png",
      "true_class": "positive",
      "model_class": "negative",
      "class_correct": false,
      "ground_truth_positive_cells": 32,
      "ground_truth_ki67": 4.0,
      "model_ki67": 0.5040289672251674,
      "model_probability": 0.005040289672251674,
      "raw_confidence": 98.99194206554967,
      "improved_confidence": 99.07874975195345,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.97276747549877,
      "entropy_confidence": 95.42778941539386,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "0/3 models agree",
      "probability_variance": 6.80813112530808e-05,
      "ki67_error": 3.4959710327748326,
      "individual_probabilities": {
        "EfficientNet-B2": 9.464933100389317e-06,
        "RegNet-Y-8GF": 0.01573437824845314,
        "ViT": 0.018867885693907738
      }
    },
    {
      "image_name": "1.png",
      "true_class": "positive",
      "model_class": "negative",
      "class_correct": false,
      "ground_truth_positive_cells": 19,
      "ground_truth_ki67": 2.375,
      "model_ki67": 0.19862683750261567,
      "model_probability": 0.0019862683750261566,
      "raw_confidence": 99.60274632499477,
      "improved_confidence": 99.58502974032977,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.99539088570258,
      "entropy_confidence": 97.93091009452066,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "0/3 models agree",
      "probability_variance": 1.1522785743562751e-05,
      "ki67_error": 2.1763731624973843,
      "individual_probabilities": {
        "EfficientNet-B2": 3.1033391678647604e-07,
        "RegNet-Y-8GF": 0.008263797499239445,
        "ViT": 0.0033329164143651724
      }
    },
    {
      "image_name": "10.png",
      "true_class": "positive",
      "model_class": "negative",
      "class_correct": false,
      "ground_truth_positive_cells": 45,
      "ground_truth_ki67": 5.625,
      "model_ki67": 46.922535076737404,
      "model_probability": 0.46922535076737404,
      "raw_confidence": 6.154929846525192,
      "improved_confidence": 45.32814367776752,
      "agreement_confidence": 66.66666666666667,
      "variance_confidence": 80.95912118967104,
      "entropy_confidence": 0.27344493129395353,
      "magnitude_confidence": 8.501705303788185,
      "confidence_level": "Very Low",
      "clinical_recommendation": "Expert review required",
      "model_agreement": "1/3 models agree",
      "probability_variance": 0.047602197025822406,
      "ki67_error": 41.297535076737404,
      "individual_probabilities": {
        "EfficientNet-B2": 0.47137391567230225,
        "RegNet-Y-8GF": 0.6386128664016724,
        "ViT": 0.11541036516427994
      }
    },
    {
      "image_name": "100.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 143,
      "ground_truth_ki67": 17.875,
      "model_ki67": 54.152458906173706,
      "model_probability": 0.5415245890617371,
      "raw_confidence": 8.304917812347412,
      "improved_confidence": 48.77097984350311,
      "agreement_confidence": 66.66666666666666,
      "variance_confidence": 94.69684127913418,
      "entropy_confidence": 0.4981017465374271,
      "magnitude_confidence": 8.319079205393791,
      "confidence_level": "Very Low",
      "clinical_recommendation": "Expert review required",
      "model_agreement": "2/3 models agree",
      "probability_variance": 0.013257896802164578,
      "ki67_error": 36.277458906173706,
      "individual_probabilities": {
        "EfficientNet-B2": 0.5468624830245972,
        "RegNet-Y-8GF": 0.619881808757782,
        "ViT": 0.34744489192962646
      }
    },
    {
      "image_name": "101.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 108,
      "ground_truth_ki67": 13.5,
      "model_ki67": 97.07110822200775,
      "model_probability": 0.9707110822200775,
      "raw_confidence": 94.1422164440155,
      "improved_confidence": 96.17369546954862,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.9598343413453,
      "entropy_confidence": 80.9186844210614,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.00010041414663675141,
      "ki67_error": 83.57110822200775,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9695708751678467,
        "RegNet-Y-8GF": 0.9815526604652405,
        "ViT": 0.9570093750953674
      }
    },
    {
      "image_name": "102.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 100,
      "ground_truth_ki67": 12.5,
      "model_ki67": 95.78091084957123,
      "model_probability": 0.9578091084957122,
      "raw_confidence": 91.56182169914244,
      "improved_confidence": 94.8974045616323,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.76951287168245,
      "entropy_confidence": 74.77513171855843,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.0005762178207938795,
      "ki67_error": 83.28091084957123,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9599388241767883,
        "RegNet-Y-8GF": 0.9713979363441467,
        "ViT": 0.915723443031311
      }
    },
    {
      "image_name": "103.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 116,
      "ground_truth_ki67": 14.499999999999998,
      "model_ki67": 98.22492897510529,
      "model_probability": 0.9822492897510529,
      "raw_confidence": 96.44985795021057,
      "improved_confidence": 97.42755317046385,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.99964899957914,
      "entropy_confidence": 87.13820460284536,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 8.775010521667859e-07,
      "ki67_error": 83.72492897510529,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9824124574661255,
        "RegNet-Y-8GF": 0.9811062812805176,
        "ViT": 0.983393132686615
      }
    },
    {
      "image_name": "104.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 110,
      "ground_truth_ki67": 13.750000000000002,
      "model_ki67": 99.58386242389679,
      "model_probability": 0.9958386242389679,
      "raw_confidence": 99.16772484779356,
      "improved_confidence": 99.2171741555983,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.98087498487868,
      "entropy_confidence": 96.10977704689309,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 4.781253780331932e-05,
      "ki67_error": 85.83386242389679,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9971690773963928,
        "RegNet-Y-8GF": 0.9977115392684937,
        "ViT": 0.9827796220779419
      }
    },
    {
      "image_name": "105.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 81,
      "ground_truth_ki67": 10.125,
      "model_ki67": 96.98088467121124,
      "model_probability": 0.9698088467121124,
      "raw_confidence": 93.96176934242249,
      "improved_confidence": 95.96314046486032,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.4805258049057,
      "entropy_confidence": 80.46504506816946,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.001298685487735756,
      "ki67_error": 86.85588467121124,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9806120991706848,
        "RegNet-Y-8GF": 0.967646062374115,
        "ViT": 0.8985116481781006
      }
    },
    {
      "image_name": "106.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 49,
      "ground_truth_ki67": 6.125,
      "model_ki67": 92.8608477115631,
      "model_probability": 0.928608477115631,
      "raw_confidence": 85.72169542312619,
      "improved_confidence": 75.76272963375006,
      "agreement_confidence": 66.66666666666666,
      "variance_confidence": 79.4052001578428,
      "entropy_confidence": 62.89048130478019,
      "magnitude_confidence": 100.0,
      "confidence_level": "High",
      "clinical_recommendation": "Good confidence, suitable for most clinical uses",
      "model_agreement": "2/3 models agree",
      "probability_variance": 0.05148699960539302,
      "ki67_error": 86.7358477115631,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9781910181045532,
        "RegNet-Y-8GF": 0.9723877310752869,
        "ViT": 0.49397218227386475
      }
    },
    {
      "image_name": "107.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 54,
      "ground_truth_ki67": 6.75,
      "model_ki67": 95.22123038768768,
      "model_probability": 0.9522123038768768,
      "raw_confidence": 90.44246077537537,
      "improved_confidence": 94.22745707149333,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.06373497502065,
      "entropy_confidence": 72.30761663869083,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.002340662562448396,
      "ki67_error": 88.47123038768768,
      "individual_probabilities": {
        "EfficientNet-B2": 0.954936683177948,
        "RegNet-Y-8GF": 0.9838506579399109,
        "ViT": 0.8698649406433105
      }
    },
    {
      "image_name": "108.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 73,
      "ground_truth_ki67": 9.125,
      "model_ki67": 98.79180669784546,
      "model_probability": 0.9879180669784546,
      "raw_confidence": 97.58361339569093,
      "improved_confidence": 98.09575552420493,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.92692981279434,
      "entropy_confidence": 90.57011535503172,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.0001826754680141423,
      "ki67_error": 89.66680669784546,
      "individual_probabilities": {
        "EfficientNet-B2": 0.990233302116394,
        "RegNet-Y-8GF": 0.9924159049987793,
        "ViT": 0.962715744972229
      }
    },
    {
      "image_name": "109.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 104,
      "ground_truth_ki67": 13.0,
      "model_ki67": 99.42693769931793,
      "model_probability": 0.9942693769931793,
      "raw_confidence": 98.85387539863586,
      "improved_confidence": 98.97644140818997,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.97938615361383,
      "entropy_confidence": 94.90797434893258,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 5.153461596544654e-05,
      "ki67_error": 86.42693769931793,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9956287145614624,
        "RegNet-Y-8GF": 0.9962785840034485,
        "ViT": 0.9807355999946594
      }
    },
    {
      "image_name": "11.png",
      "true_class": "positive",
      "model_class": "negative",
      "class_correct": false,
      "ground_truth_positive_cells": 29,
      "ground_truth_ki67": 3.6249999999999996,
      "model_ki67": 21.05671726167202,
      "model_probability": 0.2105671726167202,
      "raw_confidence": 57.88656547665596,
      "improved_confidence": 79.42640118781001,
      "agreement_confidence": 100.0,
      "variance_confidence": 95.6630605312518,
      "entropy_confidence": 25.743455705664665,
      "magnitude_confidence": 76.80972456932068,
      "confidence_level": "High",
      "clinical_recommendation": "Good confidence, suitable for most clinical uses",
      "model_agreement": "0/3 models agree",
      "probability_variance": 0.01084234867187052,
      "ki67_error": 17.43171726167202,
      "individual_probabilities": {
        "EfficientNet-B2": 0.23489905893802643,
        "RegNet-Y-8GF": 0.22587049007415771,
        "ViT": 0.009637333452701569
      }
    },
    {
      "image_name": "110.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 93,
      "ground_truth_ki67": 11.625,
      "model_ki67": 96.69867455959319,
      "model_probability": 0.9669867455959319,
      "raw_confidence": 93.39734911918637,
      "improved_confidence": 95.7754745343229,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.8447008143668,
      "entropy_confidence": 79.07149665365596,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.00038824796408300065,
      "ki67_error": 85.07367455959319,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9634761214256287,
        "RegNet-Y-8GF": 0.9912036657333374,
        "ViT": 0.9431272745132446
      }
    },
    {
      "image_name": "111.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 162,
      "ground_truth_ki67": 20.25,
      "model_ki67": 99.50106620788574,
      "model_probability": 0.9950106620788574,
      "raw_confidence": 99.00213241577147,
      "improved_confidence": 99.0791293928768,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.94317554681673,
      "entropy_confidence": 95.46667753086315,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.00014206113295816498,
      "ki67_error": 79.25106620788574,
      "individual_probabilities": {
        "EfficientNet-B2": 0.999062716960907,
        "RegNet-Y-8GF": 0.9927270412445068,
        "ViT": 0.9712135195732117
      }
    },
    {
      "image_name": "112.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 141,
      "ground_truth_ki67": 17.625,
      "model_ki67": 73.08801174163818,
      "model_probability": 0.7308801174163818,
      "raw_confidence": 46.17602348327636,
      "improved_confidence": 72.47718229354506,
      "agreement_confidence": 100.0,
      "variance_confidence": 93.76127140116321,
      "entropy_confidence": 15.980114259480338,
      "magnitude_confidence": 54.20420795679093,
      "confidence_level": "Moderate",
      "clinical_recommendation": "May benefit from expert review",
      "model_agreement": "3/3 models agree",
      "probability_variance": 0.015596821497091974,
      "ki67_error": 55.463011741638184,
      "individual_probabilities": {
        "EfficientNet-B2": 0.6987429261207581,
        "RegNet-Y-8GF": 0.9054191708564758,
        "ViT": 0.6067623496055603
      }
    },
    {
      "image_name": "113.png",
      "true_class": "positive",
      "model_class": "positive",
      "class_correct": true,
      "ground_truth_positive_cells": 189,
      "ground_truth_ki67": 23.625,
      "model_ki67": 98.69082391262054,
      "model_probability": 0.9869082391262054,
      "raw_confidence": 97.38164782524107,
      "improved_confidence": 97.98457113013895,
      "agreement_confidence": 100.0,
      "variance_confidence": 99.99066496377289,
      "entropy_confidence": 89.9345244459786,
      "magnitude_confidence": 100.0,
      "confidence_level": "Very High",
      "clinical_recommendation": "Suitable for autonomous clinical decision making",
      "model_agreement": "3/3 models agree",
      "probability_variance": 2.333759056780435e-05,
      "ki67_error": 75.06582391262054,
      "individual_probabilities": {
        "EfficientNet-B2": 0.9876591563224792,
        "RegNet-Y-8GF": 0.9887375831604004,
        "ViT": 0.9779931306838989
      }
    },
    {
      "image_name": "114.png",
      "true_class": "positive",
      "model_class": "negative",
      "class_correct": false,
      "ground_truth_positive_cells": 51,
      "ground_truth_ki67": 6.375,
      "model_ki67": 30.035250708460808,
      "model_probability": 0.3003525070846081,
      "raw_confidence": 39.929498583078384,
      "improved_confidence": 55.85457097304699,
      "agreement_confidence": 66.66666666666667,
      "variance_confidence": 82.81655187989311,
      "entropy_confidence": 11.827865437496621,
      "magnitude_confidence": 47.25763291120529,
      "confidence_level": "Low",
      "clinical_recommendation": "Recommend expert review",
      "model_agreement": "1/3 models agree",
      "probability_variance": 0.042958620300267224,
      "ki67_error": 23.660250708460808,
      "individual_probabilities": {
        "EfficientNet-B2": 0.2539461553096771,
        "RegNet-Y-8GF": 0.575631856918335,
        "ViT": 0.07463826984167099
      }
    },
    {
      "image_name": "115.png",
      "true_class": "positive",
      "model_class": "negative",
      "class_correct": false,
      "ground_truth_positive_cells": 63,
      "ground_truth_ki67": 7.875,
      "model_ki67": 48.18674981594086,
      "model_probability": 0.48186749815940855,
      "raw_confidence": 3.6265003681182906,
      "improved_confidence": 45.73746741389862,
      "agreement_confidence": 66.66666666666666,
      "variance_confidence": 84.57005623607472,
      "entropy_confidence": 0.094891745272907,
      "magnitude_confidence": 6.213208362460136,
      "confidence_level": "Very Low",
      "clinical_recommendation": "Expert review required",
      "model_agreement": "2/3 models agree",
      "probability_variance": 0.0385748594098132,
      "ki67_error": 40.31174981594086,
      "individual_probabilities": {
        "EfficientNet-B2": 0.5186467170715332,
        "RegNet-Y-8GF": 0.5380492806434631,
        "ViT": 0.112049400806427
      }
    }
  ]
}